trigger:
- main  # Trigger the pipeline when changes are pushed to the main branch

pool:
  vmImage: 'ubuntu-latest'  # You can change to 'windows-latest' if preferred

steps:
# Step 1: Install Python and dependencies
- task: UsePythonVersion@0
  inputs:
    versionSpec: '3.x'

- script: |
    pip install -r requirements.txt  # Assuming you have a requirements.txt for dependencies
    pip install pytest pytest-html    # Install pytest and pytest-html
  displayName: 'Install dependencies'

# Step 2: Run Pytest with HTML Report Generation
- script: |
    pytest --html=report.html --self-contained-html  # Run tests and generate HTML report
  displayName: 'Run Pytest and Generate HTML Report'

# Step 3: Publish the HTML Test Report (optional)
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: 'report.html'  # Path to the HTML report generated by pytest
    ArtifactName: 'TestReports'
    publishLocation: 'Container'
  displayName: 'Publish Test Report Artifact'

# Optionally, add other tasks like deployment or Selenium tests after this step
